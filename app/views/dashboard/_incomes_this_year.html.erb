<%
  invoices = []
  @this_year.each do |invoice|
    invoices << "{'x' : '#{l(Date.strptime("{#{invoice.month_number}}","{%m}"), :format => "%b")}', 'y': #{invoice.month_income}}"
  end
  invoices = ["{'x': 0, 'y': 0}"] if invoices.size == 0
%>
<figure style="width:100%;height:350px;margin:0;" id="incomes_this_year_chart"></figure>
<%= content_for :javascripts do %>
  <script type="text/javascript">
    var data = {
            "xScale": "ordinal",
            "yScale": "linear",
            "main": [
              {
                "className": ".incomes",
                "data": [
                  <%= invoices.join(',').html_safe %>
                ]
              }
            ]
          }
    var incomes_this_year_chart = new xChart('bar', data, '#incomes_this_year_chart');
  </script>
<% end %>
